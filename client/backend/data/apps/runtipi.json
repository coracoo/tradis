{"id":2,"name":"runtipi","category":"web","description":"","version":"latest","logo":"","website":"","tutorial":"","compose":"services:\n  runtipi-reverse-proxy:\n    container_name: runtipi-reverse-proxy\n    depends_on:\n      runtipi:\n        condition: service_healthy\n    image: traefik:v3.5\n    restart: unless-stopped\n    ports:\n      - 10800:80\n      - 10843:443\n    command: --providers.docker\n    volumes:\n      - ./traefik:/etc/traefik\n      - ./traefik/shared:/shared\n      - /var/run/docker.sock:/var/run/docker.sock:ro\n    networks:\n      - tipi_main_network\n\n  runtipi-db:\n    container_name: runtipi-db\n    image: postgres:14\n    restart: unless-stopped\n    stop_grace_period: 1m\n    volumes:\n      - ./data/postgres:/var/lib/postgresql/data\n    environment:\n      POSTGRES_PASSWORD: tipi#!2013\n      POSTGRES_USER: tipi\n      POSTGRES_DB: tipi\n    healthcheck:\n      test: [\"CMD-SHELL\", \"pg_isready -d tipi -U tipi\"]\n      interval: 5s\n      timeout: 10s\n      retries: 20\n      start_period: 5s\n    networks:\n      - tipi_main_network\n\n  runtipi-queue:\n    container_name: runtipi-queue\n    image: rabbitmq:4-alpine\n    restart: unless-stopped\n    ports:\n      - 5672:5672\n    environment:\n      RABBITMQ_DEFAULT_USER: tipi\n      RABBITMQ_DEFAULT_PASS: tipi#!2013\n    networks:\n      - tipi_main_network\n\n  runtipi:\n    container_name: runtipi\n    healthcheck:\n      start_period: 10s\n      test: [\"CMD\", \"curl\", \"-f\", \"http://localhost:3000/api/health\"]\n      interval: 5s\n      timeout: 10s\n      retries: 20\n    image: ghcr.io/runtipi/runtipi:latest\n    restart: unless-stopped\n    depends_on:\n      runtipi-db:\n        condition: service_healthy\n      runtipi-queue:\n        condition: service_started\n    env_file:\n      - .env\n    volumes:\n      # Data\n      - ./media:/data/media\n      - ./state:/data/state\n      - ./repos:/data/repos\n      - ./apps:/data/apps\n      - ./logs:/data/logs\n      - ./traefik:/data/traefik\n      - ./user-config:/data/user-config\n      - ./app-data:/app-data\n      - ./backups:/data/backups\n      # Static\n      - ./.env:/data/.env\n      - ./cache:/cache\n      - ./docker-compose.yml:/data/docker-compose.yml\n      - /var/run/docker.sock:/var/run/docker.sock:ro\n      - /proc:/host/proc\n      - /etc/localtime:/etc/localtime:ro\n      - /etc/timezone:/etc/timezone:ro\n    environment:\n      NODE_ENV: production\n    networks:\n      - tipi_main_network\n    labels:\n      # ---- General ----- #\n      traefik.enable: true\n      traefik.http.middlewares.redirect-to-https.redirectscheme.scheme: https\n      traefik.http.middlewares.runtipi.forwardauth.address: ${RUNTIPI_FORWARD_AUTH_URL:-http://runtipi:3000/api/auth/traefik}\n\n      # ---- Dashboard ----- #\n      traefik.http.services.dashboard.loadbalancer.server.port: 3000\n      # Local ip\n      traefik.http.routers.dashboard.rule: PathPrefix(\"/\")\n      traefik.http.routers.dashboard.service: dashboard\n      traefik.http.routers.dashboard.entrypoints: web\n      # Websecure\n      traefik.http.routers.dashboard-insecure.rule: Host(`${DOMAIN}`) \u0026\u0026 PathPrefix(`/`)\n      traefik.http.routers.dashboard-insecure.service: dashboard\n      traefik.http.routers.dashboard-insecure.entrypoints: web\n      traefik.http.routers.dashboard-insecure.middlewares: redirect-to-https\n      traefik.http.routers.dashboard-secure.rule: Host(`${DOMAIN}`) \u0026\u0026 PathPrefix(`/`)\n      traefik.http.routers.dashboard-secure.service: dashboard\n      traefik.http.routers.dashboard-secure.entrypoints: websecure\n      traefik.http.routers.dashboard-secure.tls.certresolver: myresolver\n      # Local domain\n      traefik.http.routers.dashboard-local-insecure.rule: Host(`${LOCAL_DOMAIN}`)\n      traefik.http.routers.dashboard-local-insecure.entrypoints: web\n      traefik.http.routers.dashboard-local-insecure.service: dashboard\n      traefik.http.routers.dashboard-local-insecure.middlewares: redirect-to-https\n      # Secure\n      traefik.http.routers.dashboard-local.rule: Host(`${LOCAL_DOMAIN}`)\n      traefik.http.routers.dashboard-local.entrypoints: websecure\n      traefik.http.routers.dashboard-local.tls: true\n      traefik.http.routers.dashboard-local.service: dashboard\n\nnetworks:\n  tipi_main_network:\n    driver: bridge\n    name: runtipi_tipi_main_network","screenshots":[],"schema":[{"name":"PORT_RUNTIPI-REVERSE-PROXY_80","label":"10800","description":"http端口","type":"port","default":"80","category":"basic","serviceName":"runtipi-reverse-proxy","paramType":"port"},{"name":"PORT_RUNTIPI-REVERSE-PROXY_443","label":"10843","description":"https端口","type":"port","default":"443","category":"basic","serviceName":"runtipi-reverse-proxy","paramType":"port"},{"name":"VOL_RUNTIPI-REVERSE-PROXY_0","label":"./traefik","description":"","type":"path","default":"/etc/traefik","category":"basic","serviceName":"runtipi-reverse-proxy","paramType":"path"},{"name":"VOL_RUNTIPI-REVERSE-PROXY_1","label":"./traefik/shared","description":"共享","type":"path","default":"/shared","category":"basic","serviceName":"runtipi-reverse-proxy","paramType":"path"},{"name":"VOL_RUNTIPI-REVERSE-PROXY_2","label":"/var/run/docker.sock","description":"容器映射","type":"path","default":"/var/run/docker.sock","category":"basic","serviceName":"runtipi-reverse-proxy","paramType":"path"},{"name":"VOL_RUNTIPI-DB_0","label":"./data/postgres","description":"","type":"path","default":"/var/lib/postgresql/data","category":"basic","serviceName":"runtipi-db","paramType":"path"},{"name":"POSTGRES_PASSWORD","label":"POSTGRES_PASSWORD","description":"","type":"password","default":"tipi#!2013","category":"advanced","serviceName":"runtipi-db","paramType":"env"},{"name":"POSTGRES_USER","label":"POSTGRES_USER","description":"","type":"string","default":"tipi","category":"advanced","serviceName":"runtipi-db","paramType":"env"},{"name":"POSTGRES_DB","label":"POSTGRES_DB","description":"","type":"string","default":"tipi","category":"advanced","serviceName":"runtipi-db","paramType":"env"},{"name":"PORT_RUNTIPI-QUEUE_5672","label":"5672","description":"","type":"port","default":"5672","category":"basic","serviceName":"runtipi-queue","paramType":"port"},{"name":"RABBITMQ_DEFAULT_USER","label":"RABBITMQ_DEFAULT_USER","description":"","type":"string","default":"tipi","category":"advanced","serviceName":"runtipi-queue","paramType":"env"},{"name":"RABBITMQ_DEFAULT_PASS","label":"RABBITMQ_DEFAULT_PASS","description":"","type":"string","default":"tipi#!2013","category":"advanced","serviceName":"runtipi-queue","paramType":"env"},{"name":"VOL_RUNTIPI_0","label":"./media","description":"","type":"path","default":"/data/media","category":"basic","serviceName":"runtipi","paramType":"path"},{"name":"VOL_RUNTIPI_1","label":"./state","description":"","type":"path","default":"/data/state","category":"basic","serviceName":"runtipi","paramType":"path"},{"name":"VOL_RUNTIPI_2","label":"./repos","description":"","type":"path","default":"/data/repos","category":"basic","serviceName":"runtipi","paramType":"path"},{"name":"VOL_RUNTIPI_3","label":"./apps","description":"","type":"path","default":"/data/apps","category":"basic","serviceName":"runtipi","paramType":"path"},{"name":"VOL_RUNTIPI_4","label":"./logs","description":"","type":"path","default":"/data/logs","category":"basic","serviceName":"runtipi","paramType":"path"},{"name":"VOL_RUNTIPI_5","label":"./traefik","description":"","type":"path","default":"/data/traefik","category":"basic","serviceName":"runtipi","paramType":"path"},{"name":"VOL_RUNTIPI_6","label":"./user-config","description":"","type":"path","default":"/data/user-config","category":"basic","serviceName":"runtipi","paramType":"path"},{"name":"VOL_RUNTIPI_7","label":"./app-data","description":"","type":"path","default":"/app-data","category":"basic","serviceName":"runtipi","paramType":"path"},{"name":"VOL_RUNTIPI_8","label":"./backups","description":"","type":"path","default":"/data/backups","category":"basic","serviceName":"runtipi","paramType":"path"},{"name":"VOL_RUNTIPI_9","label":"./.env","description":"","type":"path","default":"/data/.env","category":"basic","serviceName":"runtipi","paramType":"path"},{"name":"VOL_RUNTIPI_10","label":"./cache","description":"","type":"path","default":"/cache","category":"basic","serviceName":"runtipi","paramType":"path"},{"name":"VOL_RUNTIPI_11","label":"./docker-compose.yml","description":"","type":"path","default":"/data/docker-compose.yml","category":"basic","serviceName":"runtipi","paramType":"path"},{"name":"VOL_RUNTIPI_12","label":"/var/run/docker.sock","description":"","type":"path","default":"/var/run/docker.sock","category":"basic","serviceName":"runtipi","paramType":"path"},{"name":"VOL_RUNTIPI_13","label":"/proc","description":"","type":"path","default":"/host/proc","category":"basic","serviceName":"runtipi","paramType":"path"},{"name":"VOL_RUNTIPI_14","label":"/etc/localtime","description":"","type":"path","default":"/etc/localtime","category":"basic","serviceName":"runtipi","paramType":"path"},{"name":"VOL_RUNTIPI_15","label":"/etc/timezone","description":"","type":"path","default":"/etc/timezone","category":"basic","serviceName":"runtipi","paramType":"path"},{"name":"NODE_ENV","label":"NODE_ENV","description":"","type":"string","default":"production","category":"basic","serviceName":"runtipi","paramType":"env"}]}